---
import { getCollection, getEntry } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import AnimatedTitle from '../components/AnimatedTitle.astro';
import CanvasBackground from '../components/CanvasBackground.astro';
import ArrowScrollDown from '../../public/arrow-scroll-down.svg?raw';
import DisplayCard from '../components/DisplayCard.astro';

const cards = await getCollection('cards');
---

<Layout title="Alexander Mold's Portfolio">
  <header
    class="w-full relative flex items-center justify-center text-center h-dvh"
  >
    <CanvasBackground />
    <span
      class="click-me absolute top-10 left-10 -rotate-12 text-sm font-handwriting pointer-events-none"
    >
      (click me)
    </span>
    <div class="relative pointer-events-none">
      <AnimatedTitle text="Alexander Mold" />
      <p class="text-xl">Software Engineer</p>
    </div>
    <div class="scroll-down-container absolute bottom-6">
      <button class="scroll-down w-12">
        <Fragment set:html={ArrowScrollDown} />
      </button>
    </div>
  </header>
  <main class="w-full max-w-xl p-5 mx-auto">
    <DisplayCard
      title="About"
      theme="red"
      direction="left"
      text="Hello there"
    />
    {
      cards.map((card: any) => (
        <DisplayCard title={card.data.title} text={card.data.text} />
      ))
    }
  </main>
</Layout>

<style lang="scss">
  header {
    max-height: 600px;

    p {
      opacity: 0;
      margin-top: 1em;
      animation: RiseUp 450ms cubic-bezier(0.215, 0.61, 0.355, 1) forwards;
      animation-delay: 1000ms;
    }

    .click-me {
      opacity: 0;
      display: inline-block;
      animation: OpacityIn 200ms cubic-bezier(0.215, 0.61, 0.355, 1) forwards;
      animation-delay: 1500ms;
    }
  }

  .scroll-down-container {
    opacity: 0;
    animation: OpacityIn 2500ms cubic-bezier(0.215, 0.61, 0.355, 1) forwards;
    animation-delay: 2500ms;
  }

  .scroll-down {
    animation: ScrollDown 2500ms cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
  }

  @keyframes RiseUp {
    from {
      opacity: 0;
      transform: translateY(50px) skew(20deg);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes OpacityIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes ScrollDown {
    0% {
      opacity: 0;
      transform: translateY(-10px);
    }
    10% {
      opacity: 0;
      transform: translateY(-20px);
    }
    30% {
      opacity: 1;
      transform: translateY(0);
    }
    70% {
      opacity: 1;
      transform: translateY(0);
    }
    90% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 0;
      transform: translateY(20px);
    }
  }
</style>
